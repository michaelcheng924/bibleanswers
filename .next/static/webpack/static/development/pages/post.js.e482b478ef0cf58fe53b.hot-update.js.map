{"version":3,"file":"static/webpack/static/development/pages/post.js.e482b478ef0cf58fe53b.hot-update.js","sources":["webpack:///./pages/post.js"],"sourcesContent":["import React from \"react\";\nimport Head from \"next/head\";\nimport styled from \"styled-components\";\nimport * as Amp from \"react-amphtml\";\nimport fetch from \"isomorphic-unfetch\";\n\nimport { AmpGlobalStyle } from \"../components/GlobalStyle\";\nimport { AmpContainer } from \"../components/Container\";\nimport ReadingContainer from \"../components/ReadingContainer\";\nimport { AmpTitleSection } from \"../components/TitleSection\";\nimport Help from \"../components/Help\";\n\nconst RelativeAmpList = styled(Amp.AmpList)`\n  position: relative;\n  min-height: 2rem;\n`;\n\nconst Post = ({ post, slug }) => {\n  if (!post) {\n    return [\n      <h1>Post not found</h1>,\n      <div>\n        <a href=\"https://bibleanswers.io\">Bible Answers Home</a>\n      </div>\n    ];\n  }\n\n  const {\n    title,\n    description,\n    image_url,\n    date_added,\n    updated_at,\n    html,\n    published\n  } = post;\n\n  const datePublished = date_added ? new Date(date_added) : new Date();\n\n  return (\n    <AmpContainer>\n      <Head>\n        <title>{title} | Bible Answers</title>\n\n        <script\n          type=\"application/ld+json\"\n          dangerouslySetInnerHTML={{\n            __html: JSON.stringify({\n              \"@context\": \"http://schema.org\",\n              \"@type\": \"Article\",\n              mainEntityOfPage: {\n                \"@type\": \"WebPage\",\n                \"@id\": \"https://google.com/article\"\n              },\n              headline: title,\n              image: {\n                \"@type\": \"ImageObject\",\n                url: image_url,\n                height: 400,\n                width: 1200\n              },\n              datePublished: datePublished,\n              dateModified: new Date(updated_at).toISOString(),\n              author: {\n                \"@type\": \"Person\",\n                name: \"Michael Cheng\"\n              },\n              publisher: {\n                \"@type\": \"Organization\",\n                name: \"Bible Answers\",\n                logo: {\n                  \"@type\": \"ImageObject\",\n                  url: \"https://i.imgur.com/dJPxPY9.png\"\n                }\n              },\n              description: description\n            })\n          }}\n        />\n      </Head>\n\n      <AmpGlobalStyle />\n\n      <AmpTitleSection {...post} />\n\n      <ReadingContainer>\n        {published ? (\n          <div dangerouslySetInnerHTML={{ __html: html }} />\n        ) : (\n          <Help description={description} title={title} />\n        )}\n\n        <div className=\"writing\">\n          <h3>Related posts</h3>\n          <RelativeAmpList\n            specName=\"default\"\n            src={`https://bibleanswersapi.herokuapp.com/relatedposts/${slug}`}\n            items=\"items\"\n            layout=\"fill\"\n          >\n            <Amp.Template specName=\"default\" type=\"amp-mustache\">\n              <div>\n                <a href=\"{{url}}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <p className=\"first\">&rsaquo; {\"{{title}}\"}</p>\n                </a>\n              </div>\n            </Amp.Template>\n          </RelativeAmpList>\n        </div>\n      </ReadingContainer>\n    </AmpContainer>\n  );\n};\n\nPost.getInitialProps = async function({ req, query }) {\n  const res = await fetch(\n    `https://bibleanswersapi.herokuapp.com/posts/${query.slug ||\n      req.url.slice(1)}`\n  );\n  const data = await res.json();\n\n  return {\n    post: data,\n    slug: query.slug || req.url.slice(1)\n  };\n};\n\nexport default Post;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AACA;AAGA;AAAA;AAGA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBA;AAEA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAHA;AAQA;AA5BA;AADA;AAFA;AA2CA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AASA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAKA;AALA;AAQA;AACA;AAFA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAYA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}