{"version":3,"file":"static/webpack/static/development/pages/admin.js.93659e1e0ccc9bda09ba.hot-update.js","sources":["webpack:///./pages/admin.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport keyBy from \"lodash/keyBy\";\n\nimport Container from \"../components/Container\";\nimport GlobalStyle from \"../components/GlobalStyle\";\nimport AdminStyles from \"../components/AdminStyles\";\nimport Login from \"../components/Login\";\nimport AdminMain from \"../components/AdminMain\";\nimport PostEditor from \"../components/PostEditor\";\n\nclass Admin extends Component {\n  state = {\n    headers: {},\n    loggedIn: false,\n    post: null,\n    posts: [],\n    postsBySlug: {},\n    tags: []\n  };\n\n  onLoginSuccess = token => {\n    this.onFetchPostsTags();\n\n    localStorage.setItem(\"bible-answers-token\", token);\n\n    this.setState({\n      headers: {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      },\n      loggedIn: true\n    });\n  };\n\n  onFetchPostsTags = () => {\n    axios\n      .get(\"http://bibleanswersapi.herokuapp.com/initialfetch\")\n      .then(response => {\n        this.setState({\n          posts: response.data.posts,\n          postsBySlug: keyBy(response.data.posts, \"slug\"),\n          tags: response.data.tags\n        });\n      });\n  };\n\n  onSetPost = post => {\n    this.setState({ post });\n  };\n\n  render() {\n    const { headers, loggedIn, post, posts, postsBySlug, tags } = this.state;\n\n    if (!loggedIn) {\n      return <Login onLoginSuccess={this.onLoginSuccess} />;\n    }\n\n    return (\n      <Container>\n        <GlobalStyle />\n        <AdminStyles />\n        {post ? (\n          <PostEditor\n            headers={headers}\n            onFetchPostsTags={this.onFetchPostsTags}\n            onSetPost={this.onSetPost}\n            post={post}\n          />\n        ) : (\n          <AdminMain\n            headers={headers}\n            onFetchPostsTags={this.onFetchPostsTags}\n            onSetPost={this.onSetPost}\n            posts={posts}\n            postsBySlug={postsBySlug}\n            tags={tags}\n          />\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default Admin;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AADA;AAKA;AANA;AAQA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AAJA;AAQA;AACA;AACA;AACA;AACA;AACA;AANA;AAWA;;;;AAvEA;AACA;AAyEA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}