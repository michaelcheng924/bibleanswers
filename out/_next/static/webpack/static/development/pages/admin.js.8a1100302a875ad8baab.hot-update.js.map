{"version":3,"file":"static/webpack/static/development/pages/admin.js.8a1100302a875ad8baab.hot-update.js","sources":["webpack:///./pages/admin.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport keyBy from \"lodash/keyBy\";\n\nimport Container from \"../components/Container\";\nimport GlobalStyle from \"../components/GlobalStyle\";\nimport AdminStyles from \"../components/AdminStyles\";\nimport Login from \"../components/Login\";\nimport AdminMain from \"../components/AdminMain\";\nimport PostEditor from \"../components/PostEditor\";\n\nclass Admin extends Component {\n  state = {\n    loggedIn: false,\n    post: null,\n    posts: [],\n    postsBySlug: {},\n    tags: []\n  };\n\n  onLoginSuccess = token => {\n    this.onFetchPostsTags();\n\n    localStorage.setItem(\"bible-answers-token\", token);\n\n    this.setState({ loggedIn: true });\n  };\n\n  onFetchPostsTags = () => {\n    axios\n      .get(\"http://bibleanswersapi.herokuapp.com/initialfetch\")\n      .then(response => {\n        this.setState({\n          posts: response.data.posts,\n          postsBySlug: keyBy(response.data.posts, \"slug\"),\n          tags: response.data.tags\n        });\n      });\n  };\n\n  onSetPost = post => {\n    this.setState({ post });\n  };\n\n  render() {\n    const { loggedIn, post, posts, postsBySlug, tags } = this.state;\n\n    if (!loggedIn) {\n      return <Login onLoginSuccess={this.onLoginSuccess} />;\n    }\n\n    return (\n      <Container>\n        <GlobalStyle />\n        <AdminStyles />\n        {post ? (\n          <PostEditor onSetPost={this.onSetPost} post={post} />\n        ) : (\n          <AdminMain\n            onFetchPostsTags={this.onFetchPostsTags}\n            onSetPost={this.onSetPost}\n            posts={posts}\n            postsBySlug={postsBySlug}\n            tags={tags}\n          />\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default Admin;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAKA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAUA;;;;AAzDA;AACA;AA2DA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}